<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>第十周链接概述和目标文件格式 - 计算机系统基础</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="弁言.html"><strong aria-hidden="true">1.</strong> 弁言</a></li><li class="chapter-item expanded "><a href="计算机系统基础一课程概述.html"><strong aria-hidden="true">2.</strong> 计算机系统基础一课程概述.md</a></li><li class="chapter-item expanded "><a href="第一周计算机系统概述.html"><strong aria-hidden="true">3.</strong> 第一周计算机系统概述</a></li><li class="chapter-item expanded "><a href="第二周数据的表示和存储.html"><strong aria-hidden="true">4.</strong> 第二周数据的表示和存储</a></li><li class="chapter-item expanded "><a href="第三周运算电路基础.html"><strong aria-hidden="true">5.</strong> 第三周运算电路基础</a></li><li class="chapter-item expanded "><a href="第四周乘除运算及浮点数运算.html"><strong aria-hidden="true">6.</strong> 第四周乘除运算及浮点数运算</a></li><li class="chapter-item expanded "><a href="第五周IA-32指令系统概述.html"><strong aria-hidden="true">7.</strong> 第五周IA-32指令系统概述</a></li><li class="chapter-item expanded "><a href="第六周IA-32指令类型.html"><strong aria-hidden="true">8.</strong> 第六周IA-32指令类型</a></li><li class="chapter-item expanded "><a href="第七周C语言语句的机器级表示.html"><strong aria-hidden="true">9.</strong> 第七周C语言语句的机器级表示</a></li><li class="chapter-item expanded "><a href="第八周复杂数据类型的机器级表示.html"><strong aria-hidden="true">10.</strong> 第八周复杂数据类型的机器级表示</a></li><li class="chapter-item expanded "><a href="第九周x86-64指令系统.html"><strong aria-hidden="true">11.</strong> 第九周x86-64指令系统</a></li><li class="chapter-item expanded "><a href="第十周链接概述和目标文件格式.html" class="active"><strong aria-hidden="true">12.</strong> 第十周链接概述和目标文件格式</a></li><li class="chapter-item expanded "><a href="第十一周符号及符号解析.html"><strong aria-hidden="true">13.</strong> 第十一周符号及符号解析</a></li><li class="chapter-item expanded "><a href="第十二周重定位及动态链接.html"><strong aria-hidden="true">14.</strong> 第十二周重定位及动态链接</a></li><li class="chapter-item expanded "><a href="计算机系统基础一期末考试.html"><strong aria-hidden="true">15.</strong> 计算机系统基础一期末考试</a></li><li class="chapter-item expanded "><a href="计算机系统基础二课程概述.html"><strong aria-hidden="true">16.</strong> 计算机系统基础二课程概述</a></li><li class="chapter-item expanded "><a href="第一周程序执行概述.html"><strong aria-hidden="true">17.</strong> 第一周程序执行概述</a></li><li class="chapter-item expanded "><a href="第二周主存储器组织.html"><strong aria-hidden="true">18.</strong> 第二周主存储器组织</a></li><li class="chapter-item expanded "><a href="第三周磁盘存储器.html"><strong aria-hidden="true">19.</strong> 第三周磁盘存储器</a></li><li class="chapter-item expanded "><a href="第四周高速缓存概述.html"><strong aria-hidden="true">20.</strong> 第四周高速缓存概述</a></li><li class="chapter-item expanded "><a href="第五周Cache替换算法和写策略.html"><strong aria-hidden="true">21.</strong> 第五周Cache替换算法和写策略</a></li><li class="chapter-item expanded "><a href="第六周虚拟存储器.html"><strong aria-hidden="true">22.</strong> 第六周虚拟存储器</a></li><li class="chapter-item expanded "><a href="第七周IA-32-Linux中的地址转换.html"><strong aria-hidden="true">23.</strong> 第七周IA-32/Linux中的地址转换</a></li><li class="chapter-item expanded "><a href="计算机系统基础二期末考試.html"><strong aria-hidden="true">24.</strong> 计算机系统基础二期末考試</a></li><li class="chapter-item expanded "><a href="计算机系统基础三课程概述.html"><strong aria-hidden="true">25.</strong> 计算机系统基础三课程概述</a></li><li class="chapter-item expanded "><a href="第一周进程和进程的上下文切换.html"><strong aria-hidden="true">26.</strong> 第一周进程和进程的上下文切换</a></li><li class="chapter-item expanded "><a href="第二周异常和中断.html"><strong aria-hidden="true">27.</strong> 第二周异常和中断</a></li><li class="chapter-item expanded "><a href="第三周IA-32中的异常及中断机制.html"><strong aria-hidden="true">28.</strong> 第三周IA-32中的异常及中断机制</a></li><li class="chapter-item expanded "><a href="第四周IA-32Linux中异常及中断处理.html"><strong aria-hidden="true">29.</strong> 第四周IA-32/Linux中异常/中断处理</a></li><li class="chapter-item expanded "><a href="第五周用户空间IO软件.html"><strong aria-hidden="true">30.</strong> 第五周用户空间I/O软件</a></li><li class="chapter-item expanded "><a href="第六周系统总线和系统互连.html"><strong aria-hidden="true">31.</strong> 第六周系统总线和系统互连</a></li><li class="chapter-item expanded "><a href="第七周IO方式和内核空间IO软件.html"><strong aria-hidden="true">32.</strong> 第七周IO方式和内核空间IO软件</a></li><li class="chapter-item expanded "><a href="计算机系统基础三期末考試.html"><strong aria-hidden="true">33.</strong> 计算机系统基础三期末考試</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">计算机系统基础</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="第十周链接概述和目标文件格式"><a class="header" href="#第十周链接概述和目标文件格式">第十周链接概述和目标文件格式</a></h1>
<p><a href="https://rosefinch-midsummer.github.io/book/file/cs/course1-week10.pdf" target="_blank">在线阅读PDF文档</a></p>
<ul>
<li><a href="#%E7%AC%AC1%E8%AE%B2-%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6%E7%94%9F%E6%88%90%E6%A6%82%E8%BF%B0">第1讲 可执行文件生成概述</a>
<ul>
<li><a href="#%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6%E7%94%9F%E6%88%90%E8%BF%87%E7%A8%8B%E6%A6%82%E8%BF%B021%E5%88%86%E9%92%9F">可执行文件生成过程概述（21分钟）</a></li>
<li><a href="#%E9%93%BE%E6%8E%A5%E5%99%A8%E7%9A%84%E7%94%B1%E6%9D%A517%E5%88%86%E9%92%9F">链接器的由来（17分钟）</a></li>
</ul>
</li>
<li><a href="#%E7%AC%AC2%E8%AE%B2-%E7%9B%AE%E6%A0%87%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%E6%A6%82%E8%BF%B0">第2讲 目标文件格式概述</a>
<ul>
<li><a href="#%E9%93%BE%E6%8E%A5%E8%BF%87%E7%A8%8B%E7%9A%84%E6%9C%AC%E8%B4%A814%E5%88%86%E9%92%9F">链接过程的本质（14分钟）</a></li>
<li><a href="#%E7%9B%AE%E6%A0%87%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%A4%E7%A7%8D%E8%A7%86%E5%9B%BE16%E5%88%86%E9%92%9F">目标文件的两种视图（16分钟）</a></li>
</ul>
</li>
<li><a href="#%E7%AC%AC3%E8%AE%B2-elf%E5%8F%AF%E9%87%8D%E5%AE%9A%E4%BD%8D%E7%9B%AE%E6%A0%87%E6%96%87%E4%BB%B6">第3讲 ELF可重定位目标文件</a>
<ul>
<li><a href="#%E5%8F%AF%E9%87%8D%E5%AE%9A%E4%BD%8D%E6%96%87%E4%BB%B6%E6%A6%82%E8%BF%B010%E5%88%86%E9%92%9F">可重定位文件概述（10分钟）</a></li>
<li><a href="#elf%E5%A4%B4%E5%92%8C%E8%8A%82%E5%A4%B4%E8%A1%A826%E5%88%86%E9%92%9F">ELF头和节头表（26分钟）</a></li>
</ul>
</li>
<li><a href="#%E7%AC%AC4%E8%AE%B2-elf%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%9B%AE%E6%A0%87%E6%96%87%E4%BB%B6">第4讲 ELF可执行目标文件</a>
<ul>
<li><a href="#%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6%E6%A6%82%E8%BF%B013%E5%88%86%E9%92%9F">可执行文件概述（13分钟）</a></li>
<li><a href="#%E7%A8%8B%E5%BA%8F%E5%A4%B4%E8%A1%A8%E5%92%8C%E5%AD%98%E5%82%A8%E5%99%A8%E6%98%A0%E5%83%8F21%E5%88%86%E9%92%9F">程序头表和存储器映像（21分钟）</a></li>
</ul>
</li>
<li><a href="#%E7%AC%AC%E5%8D%81%E5%91%A8%E5%B0%8F%E6%B5%8B%E9%AA%8C">第十周小测验</a></li>
</ul>
<h2 id="第1讲-可执行文件生成概述"><a class="header" href="#第1讲-可执行文件生成概述">第1讲 可执行文件生成概述</a></h2>
<h3 id="可执行文件生成过程概述21分钟"><a class="header" href="#可执行文件生成过程概述21分钟">可执行文件生成过程概述（21分钟）</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311060938540.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311060939109.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311060939098.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311060940139.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311060940466.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311060940986.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311060941766.png" alt="" /></p>
<h3 id="链接器的由来17分钟"><a class="header" href="#链接器的由来17分钟">链接器的由来（17分钟）</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311060941576.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311060947038.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311060948118.png" alt="" /></p>
<p>注意：静态链接需要包含所调用函数的代码，而动态链接不需要。</p>
<h2 id="第2讲-目标文件格式概述"><a class="header" href="#第2讲-目标文件格式概述">第2讲 目标文件格式概述</a></h2>
<h3 id="链接过程的本质14分钟"><a class="header" href="#链接过程的本质14分钟">链接过程的本质（14分钟）</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311060942486.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311060943033.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311060944943.png" alt="" /></p>
<pre><code class="language-bash">
guangwudi@debian:~/csapp$ vim main.c
guangwudi@debian:~/csapp$ vim swap.c
guangwudi@debian:~/csapp$ gcc -O2 -g -o p main.c swap.c
guangwudi@debian:~/csapp$ ./p
</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311060944219.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311060945720.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311070842979.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311060945021.png" alt="" /></p>
<h3 id="目标文件的两种视图16分钟"><a class="header" href="#目标文件的两种视图16分钟">目标文件的两种视图（16分钟）</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311070850089.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311070857970.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311070906390.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311070911785.png" alt="" /></p>
<h2 id="第3讲-elf可重定位目标文件"><a class="header" href="#第3讲-elf可重定位目标文件">第3讲 ELF可重定位目标文件</a></h2>
<h3 id="可重定位文件概述10分钟"><a class="header" href="#可重定位文件概述10分钟">可重定位文件概述（10分钟）</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311070931301.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311070933840.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311070938448.png" alt="" /></p>
<h3 id="elf头和节头表26分钟"><a class="header" href="#elf头和节头表26分钟">ELF头和节头表（26分钟）</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311070931301.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311070957822.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311070959875.png" alt="" /></p>
<pre><code class="language-bash">Usage: readelf &lt;option(s)&gt; elf-file(s)
 Display information about the contents of ELF format files
 Options are:
  -a --all               Equivalent to: -h -l -S -s -r -d -V -A -I
  -h --file-header       Display the ELF file header
  -l --program-headers   Display the program headers
     --segments          An alias for --program-headers
  -S --section-headers   Display the sections' header
     --sections          An alias for --section-headers
  -g --section-groups    Display the section groups
  -t --section-details   Display the section details
  -e --headers           Equivalent to: -h -l -S
  -s --syms              Display the symbol table
     --symbols           An alias for --syms
     --dyn-syms          Display the dynamic symbol table
     --lto-syms          Display LTO symbol tables
     --sym-base=[0|8|10|16]
                         Force base for symbol sizes.  The options are
                         mixed (the default), octal, decimal, hexadecimal.
  -C --demangle[=STYLE]  Decode mangled/processed symbol names
                           STYLE can be &quot;none&quot;, &quot;auto&quot;, &quot;gnu-v3&quot;, &quot;java&quot;,
                           &quot;gnat&quot;, &quot;dlang&quot;, &quot;rust&quot;
     --no-demangle       Do not demangle low-level symbol names.  (default)
     --recurse-limit     Enable a demangling recursion limit.  (default)
     --no-recurse-limit  Disable a demangling recursion limit
     -U[dlexhi] --unicode=[default|locale|escape|hex|highlight|invalid]
                         Display unicode characters as determined by the current locale
                          (default), escape sequences, &quot;&lt;hex sequences&gt;&quot;, highlighted
                          escape sequences, or treat them as invalid and display as
                          &quot;{hex sequences}&quot;
  -n --notes             Display the core notes (if present)
  -r --relocs            Display the relocations (if present)
  -u --unwind            Display the unwind info (if present)
  -d --dynamic           Display the dynamic section (if present)
  -V --version-info      Display the version sections (if present)
  -A --arch-specific     Display architecture specific information (if any)
  -c --archive-index     Display the symbol/file index in an archive
  -D --use-dynamic       Use the dynamic section info when displaying symbols
  -L --lint|--enable-checks
                         Display warning messages for possible problems
  -x --hex-dump=&lt;number|name&gt;
                         Dump the contents of section &lt;number|name&gt; as bytes
  -p --string-dump=&lt;number|name&gt;
                         Dump the contents of section &lt;number|name&gt; as strings
  -R --relocated-dump=&lt;number|name&gt;
                         Dump the relocated contents of section &lt;number|name&gt;
  -z --decompress        Decompress section before dumping it
  -w --debug-dump[a/=abbrev, A/=addr, r/=aranges, c/=cu_index, L/=decodedline,
                  f/=frames, F/=frames-interp, g/=gdb_index, i/=info, o/=loc,
                  m/=macro, p/=pubnames, t/=pubtypes, R/=Ranges, l/=rawline,
                  s/=str, O/=str-offsets, u/=trace_abbrev, T/=trace_aranges,
                  U/=trace_info]
                         Display the contents of DWARF debug sections
  -wk --debug-dump=links Display the contents of sections that link to separate
                          debuginfo files
  -P --process-links     Display the contents of non-debug sections in separate
                          debuginfo files.  (Implies -wK)
  -wK --debug-dump=follow-links
                         Follow links to separate debug info files (default)
  -wN --debug-dump=no-follow-links
                         Do not follow links to separate debug info files
  --dwarf-depth=N        Do not display DIEs at depth N or greater
  --dwarf-start=N        Display DIEs starting at offset N
  --ctf=&lt;number|name&gt;    Display CTF info from section &lt;number|name&gt;
  --ctf-parent=&lt;name&gt;    Use CTF archive member &lt;name&gt; as the CTF parent
  --ctf-symbols=&lt;number|name&gt;
                         Use section &lt;number|name&gt; as the CTF external symtab
  --ctf-strings=&lt;number|name&gt;
                         Use section &lt;number|name&gt; as the CTF external strtab
  --sframe[=NAME]        Display SFrame info from section NAME, (default '.sframe')
  -I --histogram         Display histogram of bucket list lengths
  -W --wide              Allow output width to exceed 80 characters
  -T --silent-truncation If a symbol name is truncated, do not add [...] suffix
  @&lt;file&gt;                Read options from &lt;file&gt;
  -H --help              Display this information
  -v --version           Display the version number of readelf
</code></pre>
<pre><code class="language-c">#include &lt;stdio.h&gt;
int main()
{
	printf(&quot;guangfuzhonghua!\n&quot;);
	return 0;
}
</code></pre>
<pre><code class="language-bash">
guangwudi@debian:~/csapp$ readelf -h hello.o
ELF Header:
  Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00
  Class:                             ELF32
  Data:                              2's complement, little endian
  Version:                           1 (current)
  OS/ABI:                            UNIX - System V
  ABI Version:                       0
  Type:                              REL (Relocatable file)
  Machine:                           Intel 80386
  Version:                           0x1
  Entry point address:               0x0
  Start of program headers:          0 (bytes into file)
  Start of section headers:          660 (bytes into file)
  Flags:                             0x0
  Size of this header:               52 (bytes)
  Size of program headers:           0 (bytes)
  Number of program headers:         0
  Size of section headers:           40 (bytes)
  Number of section headers:         15
  Section header string table index: 14
</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311071002010.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311071015864.png" alt="" /></p>
<p><code>-S</code>輸出節頭表</p>
<pre><code class="language-bash">guangwudi@debian:~/csapp$ readelf -S hello.o
There are 15 section headers, starting at offset 0x294:

Section Headers:
  [Nr] Name              Type            Addr     Off    Size   ES Flg Lk Inf Al
  [ 0]                   NULL            00000000 000000 000000 00      0   0  0
  [ 1] .group            GROUP           00000000 000034 000008 04     12   6  4
  [ 2] .text             PROGBITS        00000000 00003c 00003c 00  AX  0   0  1
  [ 3] .rel.text         REL             00000000 0001e0 000020 08   I 12   2  4
  [ 4] .data             PROGBITS        00000000 000078 000000 00  WA  0   0  1
  [ 5] .bss              NOBITS          00000000 000078 000000 00  WA  0   0  1
  [ 6] .rodata           PROGBITS        00000000 000078 000011 00   A  0   0  1
  [ 7] .text.__x86.[...] PROGBITS        00000000 000089 000004 00 AXG  0   0  1
  [ 8] .comment          PROGBITS        00000000 00008d 000020 01  MS  0   0  1
  [ 9] .note.GNU-stack   PROGBITS        00000000 0000ad 000000 00      0   0  1
  [10] .eh_frame         PROGBITS        00000000 0000b0 000060 00   A  0   0  4
  [11] .rel.eh_frame     REL             00000000 000200 000010 08   I 12  10  4
  [12] .symtab           SYMTAB          00000000 000110 000090 10     13   5  4
  [13] .strtab           STRTAB          00000000 0001a0 00003f 00      0   0  1
  [14] .shstrtab         STRTAB          00000000 000210 000082 00      0   0  1
Key to Flags:
  W (write), A (alloc), X (execute), M (merge), S (strings), I (info),
  L (link order), O (extra OS processing required), G (group), T (TLS),
  C (compressed), x (unknown), o (OS specific), E (exclude),
  D (mbind), p (processor specific)
</code></pre>
<p><code>-s</code>輸出符號表</p>
<pre><code class="language-bash">guangwudi@debian:~/csapp$ readelf -s hello.o

Symbol table '.symtab' contains 9 entries:
   Num:    Value  Size Type    Bind   Vis      Ndx Name
     0: 00000000     0 NOTYPE  LOCAL  DEFAULT  UND
     1: 00000000     0 FILE    LOCAL  DEFAULT  ABS hello.c
     2: 00000000     0 SECTION LOCAL  DEFAULT    2 .text
     3: 00000000     0 SECTION LOCAL  DEFAULT    6 .rodata
     4: 00000000     0 SECTION LOCAL  DEFAULT    7 .text.__x86.get_[...]
     5: 00000000    60 FUNC    GLOBAL DEFAULT    2 main
     6: 00000000     0 FUNC    GLOBAL HIDDEN     7 __x86.get_pc_thunk.ax
     7: 00000000     0 NOTYPE  GLOBAL DEFAULT  UND _GLOBAL_OFFSET_TABLE_
     8: 00000000     0 NOTYPE  GLOBAL DEFAULT  UND puts

</code></pre>
<h2 id="第4讲-elf可执行目标文件"><a class="header" href="#第4讲-elf可执行目标文件">第4讲 ELF可执行目标文件</a></h2>
<h3 id="可执行文件概述13分钟"><a class="header" href="#可执行文件概述13分钟">可执行文件概述（13分钟）</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311071019506.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311071029684.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311071034997.png" alt="" /></p>
<pre><code class="language-bash">guangwudi@debian:~/csapp$ readelf -h hello
ELF Header:
  Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00
  Class:                             ELF32
  Data:                              2's complement, little endian
  Version:                           1 (current)
  OS/ABI:                            UNIX - System V
  ABI Version:                       0
  Type:                              DYN (Position-Independent Executable file)
  Machine:                           Intel 80386
  Version:                           0x1
  Entry point address:               0x1060
  Start of program headers:          52 (bytes into file)
  Start of section headers:          13784 (bytes into file)
  Flags:                             0x0
  Size of this header:               52 (bytes)
  Size of program headers:           32 (bytes)
  Number of program headers:         11
  Size of section headers:           40 (bytes)
  Number of section headers:         30
  Section header string table index: 29
</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311071036609.png" alt="" /></p>
<h3 id="程序头表和存储器映像21分钟"><a class="header" href="#程序头表和存储器映像21分钟">程序头表和存储器映像（21分钟）</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311071046093.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311071049426.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311071052571.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311071052100.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311071055821.png" alt="" /></p>
<pre><code class="language-bash">guangwudi@debian:~/csapp$ readelf -l hello

Elf file type is DYN (Position-Independent Executable file)
Entry point 0x1060
There are 11 program headers, starting at offset 52

Program Headers:
  Type           Offset   VirtAddr   PhysAddr   FileSiz MemSiz  Flg Align
  PHDR           0x000034 0x00000034 0x00000034 0x00160 0x00160 R   0x4
  INTERP         0x000194 0x00000194 0x00000194 0x00013 0x00013 R   0x1
      [Requesting program interpreter: /lib/ld-linux.so.2]
  LOAD           0x000000 0x00000000 0x00000000 0x003d4 0x003d4 R   0x1000
  LOAD           0x001000 0x00001000 0x00001000 0x001e0 0x001e0 R E 0x1000
  LOAD           0x002000 0x00002000 0x00002000 0x00118 0x00118 R   0x1000
  LOAD           0x002ee8 0x00003ee8 0x00003ee8 0x00128 0x0012c RW  0x1000
  DYNAMIC        0x002ef0 0x00003ef0 0x00003ef0 0x000f0 0x000f0 RW  0x4
  NOTE           0x0001a8 0x000001a8 0x000001a8 0x00044 0x00044 R   0x4
  GNU_EH_FRAME   0x00201c 0x0000201c 0x0000201c 0x00034 0x00034 R   0x4
  GNU_STACK      0x000000 0x00000000 0x00000000 0x00000 0x00000 RW  0x10
  GNU_RELRO      0x002ee8 0x00003ee8 0x00003ee8 0x00118 0x00118 R   0x1

 Section to Segment mapping:
  Segment Sections...
   00
   01     .interp
   02     .interp .note.gnu.build-id .note.ABI-tag .gnu.hash .dynsym .dynstr .gnu.version .gnu.version_r .rel.dyn .rel.plt
   03     .init .plt .plt.got .text .fini
   04     .rodata .eh_frame_hdr .eh_frame
   05     .init_array .fini_array .dynamic .got .got.plt .data .bss
   06     .dynamic
   07     .note.gnu.build-id .note.ABI-tag
   08     .eh_frame_hdr
   09
   10     .init_array .fini_array .dynamic .got
</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311071058368.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311071059888.png" alt="" /></p>
<h2 id="第十周小测验"><a class="header" href="#第十周小测验">第十周小测验</a></h2>
<p>1以下是有关使用GCC生成C语言程序的可执行文件的叙述，其中错误的是（D   ）。</p>
<p>A.第三步汇编，将汇编语言代码汇编转换为机器指令表示的机器语言代码</p>
<p>B.第四步链接，将多个模块的机器语言代码链接生成可执行目标程序文件</p>
<p>C.第一步预处理，对#include、#define、#ifdef等预处理命令进行处理</p>
<p>D.第二步编译，将预处理结果编译转换为二进制形式的汇编语言程序代码</p>
<p>解釋：第二步编译，将预处理结果编译转换为文本形式的汇编语言程序代码</p>
<p>2以下是有关使用GCC生成C语言程序的可执行文件的叙述，其中错误的是（B   ）。</p>
<p>A.预处理的结果还是一个C语言源程序文件，属于可读的文本文件</p>
<p>B.只要在链接命令中指定所有的相关可重定位目标文件就能生成可执行文件</p>
<p>C.经过预处理、编译和汇编处理的结果是一个可重定位目标文件</p>
<p>D.每个C语言源程序文件生成一个对应的可重定位目标文件</p>
<p>解释：只要……就……</p>
<p>3以下是有关链接所带来的好处和不足的叙述，错误的是（ A  ）。</p>
<p>A.使得所生成的可执行目标代码中包含了更多公共库函数代码，所占空间大</p>
<p>B.使得公共函数库可以为所有程序共享使用，有利于代码重用和提高效率</p>
<p>C.使得程序员仅需重新编译修改过的源程序模块，从而节省程序开发时间</p>
<p>D.使得程序员可以分模块开发程序，有利于提高大规模程序的开发效率</p>
<p>解释：所生成的可执行目标代码不包含公共库函数代码</p>
<p>4以下关于ELF目标文件格式的叙述中，错误的是（  D ）。</p>
<p>A.可重定位和可执行两种目标文件中的代码都是二进制表示的指令形式</p>
<p>B.可执行目标文件是ELF格式的执行视图，由不同的段组成</p>
<p>C.可重定位目标文件是ELF格式的链接视图，由不同的节组成</p>
<p>D.可重定位和可执行两种目标文件中的数据都是二进制表示的补码形式</p>
<p>解释：可重定位和可执行两种目标文件中的数据都是十六进制表示的补码形式</p>
<p>5以下关于链接器基本功能的叙述中，错误的是（ C   ）。</p>
<p>A.将每个.o文件中的.data节、.text节和.bss节合并</p>
<p>B.根据所定义符号的首地址对符号的引用进行重定位</p>
<p>C.确定每个符号（包括全局变量和局部变量）的首地址</p>
<p>D.将每个符号引用与唯一的一个符号定义进行关联</p>
<p>解释：局部变量不属于符号定义</p>
<p>6以下关于可重定位目标文件的叙述中，错误的是（ B  ）。</p>
<p>A.在.rodata节中包含相应模块内所有只读数据</p>
<p>B.在.data节中包含相应模块内所有变量的初始值</p>
<p>C.在.rel.text节和.rel.data节中包含相应模块内所有可重定位信息</p>
<p>D.在.text节中包含相应模块内所有机器代码</p>
<p>解释：.data节只包括已初始化的全局变量或静态局部变量，不包括已初始化的非静态局部变量和未初始化的变量。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311070933840.png" alt="" /></p>
<p>7以下关于ELF目标文件的ELF头的叙述中，错误的是（ D  ）。</p>
<p>A.数据结构在可重定位和可执行两种目标文件中完全一样</p>
<p>B.包含了节头表和程序头表各自的起始位置和长度</p>
<p>C.包含了操作系统版本和机器结构类型等信息</p>
<p>D.包含了ELF头本身的长度和目标文件的长度</p>
<p>解释：不包含目标文件的长度</p>
<p>8以下关于ELF目标文件的节头表的叙述中，错误的是（ B  ）。</p>
<p>A.通过节头表可获得节的名称、类型、起始地址和长度</p>
<p>B.每个表项用来记录某个节的内容以及相关描述信息</p>
<p>C.数据结构在可重定位和可执行两种目标文件中完全一样</p>
<p>D.描述了每个可装入节的起始虚拟地址、对齐和存取方式</p>
<p>解释：没有记录某个节的内容</p>
<p>9以下关于ELF可重定位和可执行两种目标文件格式比较的叙述中，错误的是（ B  ）。</p>
<p>A.可执行目标文件的ELF头中有具体程序入口地址，而在可重定位目标文件中则为0</p>
<p>B.可重定位目标文件中有初始化程序段.init节，而在可执行目标文件中则没有</p>
<p>C.可执行目标文件中有程序头表（段头表），而在可重定位目标文件中则没有</p>
<p>D.可重定位目标文件中有可重定位节.rel.text和.rel.data，而在可执行目标文件中则没有</p>
<p>解释：可执行目标文件中有初始化程序段.init节，而可重定位目标文件中没有</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311071029684.png" alt="" /></p>
<p>10以下关于ELF可执行目标文件的程序头表（段头表）的叙述中，错误的是（ C  ）。</p>
<p>A..text节和.rodata节都包含在只读代码段，而.data节和.bss节都包含在读写数据段</p>
<p>B.通过段头表可获得可装入段或特殊段的类型、在文件中的偏移位置及长度</p>
<p>C.用于描述可执行文件中的节与主存中的存储段之间的映射关系</p>
<p>D.描述了每个可装入段的起始虚拟地址、存储长度、存取方式和对齐方式</p>
<p>解释：ELF可执行目标文件的程序头表（段头表）用于描述可执行文件中的节与虚拟空间中的存储段之间的映射关系</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost01/img/202311071049426.png" alt="" /></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="第九周x86-64指令系统.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="第十一周符号及符号解析.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="第九周x86-64指令系统.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="第十一周符号及符号解析.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
